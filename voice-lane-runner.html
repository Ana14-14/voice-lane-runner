<!DOCTYPE html>
<html>
<head>
  <title>Voice Lane Runner</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; background: #e0f7fa; }
    #game { position: relative; margin: auto; width: 300px; height: 400px; background: #ccc; overflow: hidden; border: 4px solid #333; }
    .lane { position: absolute; width: 100px; height: 400px; border-left: 1px solid #999; border-right: 1px solid #999; }
    #player { position: absolute; bottom: 20px; width: 60px; height: 60px; background: blue; left: 120px; border-radius: 10px; }
    .obstacle { position: absolute; width: 60px; height: 60px; background: red; top: -60px; border-radius: 10px; }
    #info { margin-top: 10px; font-size: 18px; }
  </style>
</head>
<body>
<h2>ðŸŽ¤ Voice Lane Runner</h2>
<p>Say LEFT or RIGHT</p>
<div id="game">
  <div class="lane" style="left:0"></div>
  <div class="lane" style="left:100px"></div>
  <div class="lane" style="left:200px"></div>
  <div id="player"></div>
</div>
<div id="info">Listening...</div>
<script>
let playerLane = 1;
let speed = 3;
let reverse = false;
const player = document.getElementById("player");
const info = document.getElementById("info");
const game = document.getElementById("game");
function updatePlayer() {
  player.style.left = (playerLane * 100 + 20) + "px";
}
updatePlayer();
function spawnObstacle() {
  const obs = document.createElement("div");
  obs.className = "obstacle";
  obs.lane = Math.floor(Math.random() * 3);
  obs.style.left = (obs.lane * 100 + 20) + "px";
  game.appendChild(obs);
  let y = -60;
  const move = setInterval(() => {
    y += speed;
    obs.style.top = y + "px";
    if (y > 320 && obs.lane === playerLane) {
      alert("ðŸ’¥ Oops! Try again!");
      location.reload();
    }
    if (y > 400) {
      obs.remove();
      clearInterval(move);
    }
  }, 20);
}
setInterval(spawnObstacle, 1500);
setInterval(() => {
  reverse = !reverse;
  info.textContent = reverse ? "ðŸ”„ REVERSE ROUND!" : "Normal controls";
}, 8000);
const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
const recognition = new SpeechRecognition();
recognition.continuous = true;
recognition.lang = "en-US";
recognition.onresult = (event) => {
  const word = event.results[event.results.length - 1][0].transcript.toLowerCase();
  if (word.includes("left")) {
    if (!reverse && playerLane > 0) playerLane--;
    if (reverse && playerLane < 2) playerLane++;
  }
  if (word.includes("right")) {
    if (!reverse && playerLane < 2) playerLane++;
    if (reverse && playerLane > 0) playerLane--;
  }
  updatePlayer();
};
recognition.start();
</script>
</body>
</html>
